import{u as b,z as C,c as M,o,w as u,b as t,a as g,d as r,l as c,f as a,t as i,g as l,i as x,k as B,F as w,r as v,m as S,e as V}from"./app-yIWklYjY.js";import{_ as F}from"./AuthenticatedLayout-Chb_zu02.js";import{f as T}from"./formatDate-BykdDrlu.js";import"./ApplicationLogo-6M8EDCB_.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const D={class:"max-w-4xl mx-auto py-4 sm:py-6 lg:py-8 px-3 sm:px-4 lg:px-8"},N={class:"flex items-center flex-wrap gap-1 sm:gap-2 text-xs sm:text-sm text-gray-500 mb-4 sm:mb-6"},U={class:"bg-white rounded-lg sm:rounded-xl shadow-sm border p-4 sm:p-6"},z={class:"mb-4 sm:mb-6 pb-4 sm:pb-6 border-b"},P={class:"text-xl sm:text-2xl font-bold text-gray-900 mb-2"},H={class:"text-gray-600 text-sm sm:text-base mb-4"},L={class:"grid grid-cols-1 xs:grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4 text-sm"},A={class:"min-w-0"},I={class:"font-medium truncate"},O={class:"min-w-0"},E={class:"font-medium capitalize truncate"},$={class:"min-w-0"},q={class:"font-medium truncate"},G={class:"min-w-0"},J={class:"font-medium capitalize truncate"},K={class:"mb-4 sm:mb-6"},Q={class:"flex flex-col xs:flex-row xs:items-center gap-3 sm:gap-4"},R=["disabled"],W=["value"],X={key:0,class:"flex items-center gap-2 px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm font-medium w-fit"},Y={class:"text-xs sm:text-sm text-gray-600 mt-2"},Z={key:0},_={key:0,class:"mb-4 sm:mb-6"},tt={class:"border-2 border-dashed border-gray-300 rounded-lg p-4 sm:p-6"},et={key:0,class:"text-red-600 text-xs sm:text-sm mt-1"},st=["disabled"],ot={key:0,class:"mt-3 sm:mt-4 p-3 bg-green-50 border border-green-200 rounded-lg flex items-center gap-2"},rt={key:0,class:"space-y-2 sm:space-y-3"},lt={class:"flex items-center gap-2 sm:gap-3 min-w-0 flex-1"},at={class:"text-sm text-gray-700 truncate"},nt={key:1,class:"text-center py-6 sm:py-8 text-gray-500"},it={key:0,class:"text-xs sm:text-sm mt-1 text-gray-600"},dt={key:1,class:"text-xs sm:text-sm mt-1 text-gray-600"},mt={class:"flex flex-col xs:flex-row gap-2 sm:gap-3 pt-4 sm:pt-6 mt-4 sm:mt-6 border-t"},ft={__name:"TaskUpdate",props:{project:Object,task:Object,deliverables:Array},setup(s){const d=s,m=b({file:null}),f=b({status:d.task.status}),k=C(!1),h=()=>{if(d.task.status==="complete"){alert("Completed tasks cannot be modified.");return}f.put(route("tasks.update",[d.project.id,d.task.id]),{preserveScroll:!0,onSuccess:()=>{f.status==="complete"&&window.location.reload()}})},y=()=>{if(d.task.status==="not_started"){alert("Please start the task before uploading files.");return}if(d.task.status==="complete"){alert("Cannot upload files to completed tasks.");return}m.post(route("deliverables.store",d.task.id),{preserveScroll:!0,onSuccess:()=>{m.reset(),k.value=!0,setTimeout(()=>k.value=!1,3e3)}})},j={product:["not_started","in_progress","complete"],design:["not_started","in_progress","complete"],development:["not_started","in_progress","testing","complete"]};return(p,e)=>(o(),M(F,null,{default:u(()=>[t("div",D,[t("nav",N,[g(r(c),{href:p.route("dashboard"),class:"hover:text-gray-700 truncate"},{default:u(()=>[...e[2]||(e[2]=[a("Dashboard",-1)])]),_:1},8,["href"]),e[4]||(e[4]=t("svg",{class:"w-3 h-3 sm:w-4 sm:h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)),g(r(c),{href:p.route("projects.index"),class:"hover:text-gray-700 truncate"},{default:u(()=>[...e[3]||(e[3]=[a("Projects",-1)])]),_:1},8,["href"]),e[5]||(e[5]=t("svg",{class:"w-3 h-3 sm:w-4 sm:h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)),g(r(c),{href:p.route("projects.show",s.project.id),class:"hover:text-gray-700 truncate max-w-[120px]"},{default:u(()=>[a(i(s.project.name),1)]),_:1},8,["href"]),e[6]||(e[6]=t("svg",{class:"w-3 h-3 sm:w-4 sm:h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)),e[7]||(e[7]=t("span",{class:"text-gray-900 font-medium truncate"},"Update Task",-1))]),t("div",U,[t("div",z,[t("h1",P,i(s.task.title),1),t("p",H,i(s.task.description||"No description"),1),t("div",L,[t("div",A,[e[8]||(e[8]=t("span",{class:"text-gray-500 text-xs sm:text-sm"},"Project:",-1)),t("p",I,i(s.project.name),1)]),t("div",O,[e[9]||(e[9]=t("span",{class:"text-gray-500 text-xs sm:text-sm"},"Stage:",-1)),t("p",E,i(s.task.stage),1)]),t("div",$,[e[10]||(e[10]=t("span",{class:"text-gray-500 text-xs sm:text-sm"},"Due Date:",-1)),t("p",q,i(r(T)(s.task.due_date)||"Not set"),1)]),t("div",G,[e[11]||(e[11]=t("span",{class:"text-gray-500 text-xs sm:text-sm"},"Current Status:",-1)),t("p",J,i(s.task.status.replace("_"," ")),1)])])]),t("div",K,[e[19]||(e[19]=t("h2",{class:"text-lg font-semibold text-gray-900 mb-3 sm:mb-4"},"Update Task Status",-1)),t("div",Q,[B(t("select",{"onUpdate:modelValue":e[0]||(e[0]=n=>r(f).status=n),onChange:h,disabled:s.task.status==="complete",class:"px-3 sm:px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 disabled:opacity-50 text-sm sm:text-base w-full xs:w-auto"},[(o(!0),l(w,null,v(j[s.task.stage],n=>(o(),l("option",{key:n,value:n},i(n.replace("_"," ")),9,W))),128))],40,R),[[S,r(f).status]]),s.task.status==="complete"?(o(),l("div",X,[...e[12]||(e[12]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1),a(" Task Completed ",-1)])])):x("",!0)]),t("p",Y,[e[14]||(e[14]=a(" Status progression: Not Started ",-1)),e[15]||(e[15]=t("svg",{class:"w-3 h-3 sm:w-4 sm:h-4 inline mx-1 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)),e[16]||(e[16]=a(" In Progress ",-1)),s.task.stage==="development"?(o(),l("span",Z,[...e[13]||(e[13]=[t("svg",{class:"w-3 h-3 sm:w-4 sm:h-4 inline mx-1 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1),a(" Testing ",-1)])])):x("",!0),e[17]||(e[17]=t("svg",{class:"w-3 h-3 sm:w-4 sm:h-4 inline mx-1 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)),e[18]||(e[18]=a(" Complete ",-1))])]),s.task.status!=="not_started"&&s.task.status!=="complete"?(o(),l("div",_,[e[23]||(e[23]=t("h2",{class:"text-lg font-semibold text-gray-900 mb-3 sm:mb-4"},"Upload Deliverables",-1)),t("div",tt,[t("form",{onSubmit:V(y,["prevent"]),class:"space-y-3 sm:space-y-4"},[t("div",null,[e[20]||(e[20]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Upload File (Max: 10MB) ",-1)),t("input",{type:"file",onInput:e[1]||(e[1]=n=>r(m).file=n.target.files[0]),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 text-sm sm:text-base",accept:"*/*"},null,32),r(m).errors.file?(o(),l("div",et,i(r(m).errors.file),1)):x("",!0)]),t("button",{type:"submit",disabled:r(m).processing||!r(m).file,class:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition disabled:opacity-50 text-sm sm:text-base w-full sm:w-auto justify-center"},[...e[21]||(e[21]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})],-1),a(" Upload File ",-1)])],8,st)],32)]),k.value?(o(),l("div",ot,[...e[22]||(e[22]=[t("svg",{class:"w-4 h-4 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1),t("p",{class:"text-green-800 text-sm"},"File uploaded successfully!",-1)])])):x("",!0)])):x("",!0),t("div",null,[e[28]||(e[28]=t("h2",{class:"text-lg font-semibold text-gray-900 mb-3 sm:mb-4"},"Uploaded Files",-1)),s.deliverables.length?(o(),l("div",rt,[(o(!0),l(w,null,v(s.deliverables,n=>(o(),l("div",{key:n.id,class:"flex items-center justify-between p-3 border rounded-lg hover:bg-gray-50 transition"},[t("div",lt,[e[24]||(e[24]=t("svg",{class:"w-4 h-4 sm:w-5 sm:h-5 text-gray-400 shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)),t("span",at,i(n.file_path.split("/").pop()),1)]),g(r(c),{href:p.route("deliverables.download",n.id),class:"flex items-center gap-1 text-blue-600 hover:text-blue-800 text-sm font-medium shrink-0 ml-2"},{default:u(()=>[...e[25]||(e[25]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),a(" Download ",-1)])]),_:1},8,["href"])]))),128))])):(o(),l("div",nt,[e[26]||(e[26]=t("svg",{class:"w-12 h-12 sm:w-16 sm:h-16 text-gray-300 mx-auto mb-3 sm:mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)),e[27]||(e[27]=t("p",{class:"text-sm sm:text-base"},"No files uploaded yet.",-1)),s.task.status==="not_started"?(o(),l("p",it," Start the task to upload files. ")):x("",!0),s.task.status==="complete"?(o(),l("p",dt," Task completed - no more uploads allowed. ")):x("",!0)]))]),t("div",mt,[g(r(c),{href:p.route("projects.show",s.project.id),class:"flex items-center justify-center gap-2 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition text-sm sm:text-base order-2 xs:order-1"},{default:u(()=>[...e[29]||(e[29]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1),a(" Back to Project ",-1)])]),_:1},8,["href"]),g(r(c),{href:p.route("my.tasks"),class:"flex items-center justify-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition text-sm sm:text-base order-1 xs:order-2"},{default:u(()=>[...e[30]||(e[30]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})],-1),a(" View My Tasks ",-1)])]),_:1},8,["href"])])])])]),_:1}))}};export{ft as default};
