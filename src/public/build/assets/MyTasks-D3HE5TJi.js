import{_ as p}from"./Modal-CEswGw7b.js";import{g as r,o as n,F as b,r as y,b as e,t as d,s as g,e as v,n as w,D as h,i as k,a as c,f as $,w as f,c as x}from"./app-C6lQK9rI.js";import{_ as C}from"./MemberLayout-CQzjcj-n.js";import"./AdminLayout-B0pG9fGE.js";import"./DropdownLink-DS0BcUvT.js";const _=["value"],D=["value"],S={__name:"TaskStatusSelect",props:{value:String},emits:["change"],setup(s,{emit:i}){const o=i,a=[{value:"not_started",label:"Not Started"},{value:"in_progress",label:"In Progress"},{value:"testing",label:"Testing"},{value:"complete",label:"Complete"}];return(m,u)=>(n(),r("select",{value:s.value,onChange:u[0]||(u[0]=t=>o("change",t.target.value)),class:"border rounded p-2 text-sm w-full"},[(n(),r(b,null,y(a,t=>e("option",{key:t.value,value:t.value},d(t.label),9,D)),64))],40,_))}},T={__name:"FileUpload",props:{taskId:Number},setup(s){const i=s,o=g(null),a=g(!1);function m(u){const t=new FormData;t.append("file",u[0]),t.append("task_id",i.taskId),h.post(route("deliverables.store",i.taskId),t,{forceFormData:!0,preserveScroll:!0})}return(u,t)=>(n(),r("div",{class:w(["border-2 border-dashed rounded-lg p-4 text-center cursor-pointer",a.value?"border-blue-500 bg-blue-50":"border-gray-300"]),onDragover:t[1]||(t[1]=v(l=>a.value=!0,["prevent"])),onDragleave:t[2]||(t[2]=v(l=>a.value=!1,["prevent"])),onDrop:t[3]||(t[3]=v(l=>{a.value=!1,m(l.dataTransfer.files)},["prevent"])),onClick:t[4]||(t[4]=l=>o.value.click())},[t[5]||(t[5]=e("p",{class:"text-sm text-gray-500"},"Drag & drop file here, or click to upload",-1)),e("input",{type:"file",class:"hidden",ref_key:"fileInput",ref:o,onChange:t[0]||(t[0]=l=>m(l.target.files))},null,544)],34))}},j={class:"border rounded-lg bg-white shadow hover:shadow-lg transition p-5 flex flex-col justify-between"},I={class:"font-semibold text-lg text-gray-800"},M={class:"text-sm text-gray-600 mt-1 line-clamp-2"},N={class:"mt-4 flex items-center gap-2"},F={key:1,class:"mt-4"},B={class:"flex justify-between items-center mb-4"},V={class:"text-lg font-semibold"},U={class:"whitespace-pre-line text-gray-700"},O={class:"flex justify-between items-center mb-4 px-4"},W={__name:"MyTaskCard",props:{task:Object},setup(s){const i=s,o=g(!1),a=g(!1);function m(u){h.put(route("tasks.update",[i.task.project_id,i.task.id]),{status:u},{preserveScroll:!0})}return(u,t)=>(n(),r("div",j,[e("h2",I,"Title: "+d(s.task.title),1),e("p",M," Description: "+d(s.task.description||"No description provided."),1),s.task.description&&s.task.description.length>100?(n(),r("button",{key:0,onClick:t[0]||(t[0]=l=>o.value=!0),class:"text-xs text-blue-600 hover:underline mt-1"}," View full description ")):k("",!0),e("div",N,[t[7]||(t[7]=e("label",{class:"text-sm font-medium text-gray-700"},"Status:",-1)),e("button",{onClick:t[1]||(t[1]=l=>a.value=!0),class:"ml-2 px-3 py-1 rounded-full text-xs font-semibold bg-blue-600 text-white shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-400 flex items-center gap-1 transition"},[$(d(s.task.status.replace("_"," "))+" ",1),t[6]||(t[6]=e("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M5 12h14M12 5l7 7-7 7"})],-1))])]),["in_progress","testing"].includes(s.task.status)?(n(),r("div",F,[c(T,{taskId:s.task.id},null,8,["taskId"])])):k("",!0),c(p,{show:o.value,"onUpdate:show":t[3]||(t[3]=l=>o.value=l),maxWidth:"lg"},{default:f(()=>[e("div",B,[e("h3",V,d(s.task.title),1),e("button",{onClick:t[2]||(t[2]=l=>o.value=!1),class:"text-gray-500 hover:text-gray-700"}," x ")]),e("p",U,d(s.task.description),1)]),_:1},8,["show"]),c(p,{show:a.value,"onUpdate:show":t[5]||(t[5]=l=>a.value=l),maxWidth:"sm"},{default:f(()=>[e("div",O,[t[8]||(t[8]=e("h3",{class:"text-lg font-semibold"},"Update Task Status",-1)),e("button",{onClick:t[4]||(t[4]=l=>a.value=!1),class:"text-gray-500 hover:text-gray-700"}," x ")]),c(S,{value:s.task.status,onChange:m},null,8,["value"])]),_:1},8,["show"])]))}},z={class:"space-y-6"},A={class:"flex justify-between items-center"},E={class:"text-sm text-gray-500"},L={key:0,class:"p-6 border rounded-lg bg-gray-50 text-center text-gray-500"},P={key:1,class:"grid gap-6 sm:grid-cols-2 lg:grid-cols-3"},K={__name:"MyTasks",props:{tasks:Array,summary:Object},setup(s){return(i,o)=>(n(),x(C,null,{default:f(()=>[e("div",z,[e("div",A,[o[0]||(o[0]=e("h1",{class:"text-2xl font-bold text-gray-800"},"My Tasks",-1)),e("div",E," Total: "+d(s.summary.total)+" | Complete: "+d(s.summary.complete),1)]),s.tasks.length===0?(n(),r("div",L," You don't have any tasks assigned yet. ")):(n(),r("div",P,[(n(!0),r(b,null,y(s.tasks,a=>(n(),x(W,{key:a.id,task:a},null,8,["task"]))),128))]))])]),_:1}))}};export{K as default};
